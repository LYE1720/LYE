<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>更多回憶</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <canvas id="confetti"></canvas>

  <!-- 只保留一個 nav -->
  <nav class="topnav">
    <a class="brand" href="index.html">🎂 Happy Day</a>
    <div class="nav">
      <a href="index.html">首頁</a>
      <a href="more.html" aria-current="page">更多回憶</a>
    </div>
  </nav>

  <!-- 只保留一個 hero，按鈕放這裡 -->
  <header class="hero">
    <div class="hero-inner">
      <h1>更多回憶與祝福</h1>
      <p class="subtitle">
        以前總說碩士生會把實驗室當成家... <br>
        直到今天夏天加入了一群可愛的弟弟妹妹，才覺得實驗室真的像家✨ 
      </p>

      <div class="hero-actions">
        <button id="celebrateBtn" class="btn primary">播放彩帶</button>
        <button class="btn" data-letter="tpl-more-1" data-title="小記 #1">打開小記 #1</button>
        <button class="btn" data-letter="tpl-more-2" data-title="小記 #2">打開小記 #2</button>
        <button class="btn" data-letter="tpl-more-3" data-title="小記 #3">打開小記 #3</button>
      </div>
    </div>
  </header>


<body>
  <!-- 為了相容你現有的 script.js（彩帶程式），這頁也放一個 canvas，無害 -->
  <canvas id="confetti"></canvas>
  <main class="container">

    <!-- 1) 里程碑時間軸 -->
    <section class="card">
      <h2>里程碑時間軸</h2>
      <ul class="timeline">
        <li>
          <div class="dot"></div>
          <time>2023-09</time>
          <h3>第一次一起出遊</h3>
          <p>海風吹來超舒服，結果把帽子吹走 😆</p>
        </li>
        <li>
          <div class="dot"></div>
          <time>2024-02</time>
          <h3>一起跨年補班</h3>
          <p>超級忙，但還是偷塞了熱可可與手寫卡片。</p>
        </li>
        <li>
          <div class="dot"></div>
          <time>2025-07</time>
          <h3>願望達成清單 +1</h3>
          <p>還記得那天笑到肚子痛的點嗎？我記得。</p>
        </li>
      </ul>
    </section>

    <!-- 2) 拍立得相片牆（可任意增減） -->
    <section class="card">
      <h2>拍立得相片牆</h2>
      <ul class="polaroids">
        <li class="r1"><figure><img src="assets/bdpic2.jpg" alt="回憶 A"><figcaption>回憶 A</figcaption></figure></li>
        <li class="r2"><figure><img src="assets/bdpic3.jpg" alt="回憶 B"><figcaption>回憶 B</figcaption></figure></li>
        <li class="r3"><figure><img src="assets/bdpic4.jpg" alt="回憶 C"><figcaption>回憶 C</figcaption></figure></li>
        <!-- 多放幾張就複製上面 li，換圖即可 -->
      </ul>
      <p class="muted" style="margin-top:8px">提示：想放更多張，就在 <code>.polaroids</code> 裡多加 <code>&lt;li&gt;</code>。</p>
    </section>

    <!-- 3) 我們的待辦清單（會存到本機） -->
    <section class="card">
      <h2>我們的待辦清單</h2>
      <ul class="todo" id="bucketList">
        <li><label><input type="checkbox" data-id="b1"> 去看一場演唱會</label></li>
        <li><label><input type="checkbox" data-id="b2"> 一起做一款甜點</label></li>
        <li><label><input type="checkbox" data-id="b3"> 再回到最初見面的那條街</label></li>
        <li><label><input type="checkbox" data-id="b4"> 幫彼此選一份小禮物</label></li>
      </ul>
      <p class="muted" style="margin-top:8px">打勾會自動記住（只存這台裝置）。</p>
    </section>

  </main>

  <footer class="footer"><p>Made with 💛</p></footer>
  
<!-- 通用對話框（只有一個） -->
<dialog id="letter" class="letter">
  <form method="dialog">
    <h3 id="dlgTitle">訊息</h3>
    <div id="dlgBody" class="dlg-body"></div>
    <menu><button class="btn primary">關閉</button></menu>
  </form>
</dialog>

<!-- 內容模板們（想加幾段就多放幾個 <template>） -->
<template id="tpl-more-1">
  <p>這一段寫你想說的小記 #1，可以用<br>換行，也能放<strong>粗體</strong>或小表情 ✨</p>
</template>

<template id="tpl-more-2">
  <p>小記 #2：把某個回憶寫下來，像是某次好笑的烏龍、某句你很喜歡的話。</p>
</template>

<template id="tpl-more-3">
  <p>小記 #3：放個祝福、承諾或下一個小目標。</p>
</template>

  
  <script src="script.js"></script>
  <!-- 這頁專用的小腳本（不動你的 script.js） -->
  <script>
    // 待辦清單：把勾選狀態存到 localStorage
    (function(){
      const key = "bucket-v1";
      const wrap = document.getElementById("bucketList");
      if(!wrap) return;
      const saved = JSON.parse(localStorage.getItem(key) || "{}");
      wrap.querySelectorAll('input[type="checkbox"]').forEach(box=>{
        const id = box.dataset.id;
        if (saved[id]) box.checked = true;
        box.addEventListener("change", ()=>{
          saved[id] = box.checked;
          localStorage.setItem(key, JSON.stringify(saved));
        });
      });
    })();
  </script>
</body>
</html>

<script>
  // 點任一含 data-letter 的按鈕 → 開通用對話框，載入對應模板
  (function(){
    const dlg   = document.getElementById("letter");
    const title = document.getElementById("dlgTitle");
    const body  = document.getElementById("dlgBody");
    if(!dlg || !title || !body) return;

    document.addEventListener("click", (e)=>{
      const btn = e.target.closest("[data-letter]");
      if(!btn) return;
      const tpl = document.getElementById(btn.dataset.letter);
      if(!tpl) return alert("找不到內容模板：" + btn.dataset.letter);
      title.textContent = btn.dataset.title || "訊息";
      body.innerHTML = tpl.innerHTML;
      dlg.showModal();
    });
  })();
</script>
