<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>更多回憶</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <canvas id="confetti"></canvas>

  <!-- 只保留一個 nav -->
  <nav class="topnav">
    <a class="brand" href="index.html">🎂 Happy Day</a>
    <div class="nav">
      <a href="index.html">首頁</a>
      <a href="more.html" aria-current="page">更多回憶</a>
    </div>
  </nav>

  <!-- 只保留一個 hero，按鈕放這裡 -->
  <header class="hero">
    <div class="hero-inner">
      <h1>更多回憶與祝福</h1>
      <p class="subtitle">
        以前總說碩士生要把實驗室當成第二個家 <br>
        但是直到今年夏天開始，才覺得實驗室真的像家✨ 
      </p>

      <div class="hero-actions">
        <button id="celebrateBtn" class="btn primary">播放彩帶</button>
        <button class="btn" data-letter="tpl-more-1" data-title="超好笑其實還有">是不是以為沒有了</button>
        <button class="btn" data-letter="tpl-more-2" data-title="欸黑欸黑欸嘿嘿">欸黑點開還有喔 </button>
        <button class="btn" data-letter="tpl-more-3" data-title="完了我覺得我說話越來越像小洪"> 是不是打code的最後都會起笑 </button>
      </div>
    </div>
  </header>


<body>
  <!-- 為了相容你現有的 script.js（彩帶程式），這頁也放一個 canvas，無害 -->
  <canvas id="confetti"></canvas>
  <main class="container">

 <section class="card" id="polaroid-wall">
  <h2>拍立得相片牆</h2>
 <ul id="bigPolaroids" class="polaroids">
  <li class="r1">
    <figure>
      <img src="assets/no1.jpg" alt="2025.11.22">
      <figcaption>
        <div class="cap-row">
          <span class="title">頒獎典禮</span>
          <button class="btn tiny" data-letter="tpl-p1" data-title="2025.11.22">解鎖看更多</button>
        </div>
        <div class="note-sum">林芷儀很少看起來這麼正常的</div> 
      </figcaption>
    </figure>
  </li>

  <li class="r2">
    <figure>
      <img src="assets/no2.jpg" alt="2025.12.06">
      <figcaption>
        <div class="cap-row">
          <span class="title">大型詐騙現場</span>
          <button class="btn tiny" data-letter="tpl-p2" data-title="2025.12.06">解鎖看更多</button>
        </div>
        <div class="note-sum">找亮點</div>
      </figcaption>
    </figure>
  </li>

  <li class="r3">
    <figure>
      <img src="assets/no3.jpg" alt="2025.12.01">
      <figcaption>
        <div class="cap-row">
          <span class="title"> 是熊 聖誕樹的出生日</span>
          <button class="btn tiny" data-letter="tpl-p3" data-title="2025.12.01">解鎖看更多</button>
        </div>
        <div class="note-sum">阿立妳在找什麼？</div>
      </figcaption>
    </figure>
  </li>
</ul>

  </ul>
</section>

    <!-- 2) 拍立得相片牆（可任意增減） -->
    <section class="card">
      <h2>拍立得相片牆</h2>
      <ul class="polaroids">
        <li class="r1"><figure><img src="assets/bdpic2.jpg" alt="回憶 A"><figcaption>回憶 A</figcaption></figure></li>
        <li class="r2"><figure><img src="assets/bdpic3.jpg" alt="回憶 B"><figcaption>回憶 B</figcaption></figure></li>
        <li class="r3"><figure><img src="assets/bdpic4.jpg" alt="回憶 C"><figcaption>回憶 C</figcaption></figure></li>
        <!-- 多放幾張就複製上面 li，換圖即可 -->
      </ul>
      <p class="muted" style="margin-top:8px">提示：想放更多張，就在 <code>.polaroids</code> 裡多加 <code>&lt;li&gt;</code>。</p>
    </section>

    <!-- 3) 我們的待辦清單（會存到本機） -->
    <section class="card">
      <h2>我們的待辦清單</h2>
      <ul class="todo" id="bucketList">
        <li><label><input type="checkbox" data-id="b1"> 去看一場演唱會</label></li>
        <li><label><input type="checkbox" data-id="b2"> 一起做一款甜點</label></li>
        <li><label><input type="checkbox" data-id="b3"> 再回到最初見面的那條街</label></li>
        <li><label><input type="checkbox" data-id="b4"> 幫彼此選一份小禮物</label></li>
      </ul>
      <p class="muted" style="margin-top:8px">打勾會自動記住（只存這台裝置）。</p>
    </section>

  </main>

  <footer class="footer"><p>Made with 💛</p></footer>

<!-- 通用敘述對話框 -->
<dialog id="noteDialog" class="letter">
  <form method="dialog">
    <h3 id="noteTitle">寫敘述</h3>
    <textarea id="noteTextarea" rows="6" placeholder="在這裡輸入這張照片的敘述…"></textarea>
    <menu>
      <button class="btn" value="cancel">取消</button>
      <button class="btn primary" id="noteSave" type="button">儲存</button>
    </menu>
  </form>
</dialog>

<!-- 通用對話框（只有一個） -->
<dialog id="letter" class="letter">
  <form method="dialog">
    <h3 id="dlgTitle">訊息</h3>
    <div id="dlgBody" class="dlg-body"></div>
    <menu><button class="btn primary">關閉</button></menu>
  </form>
</dialog>

<!-- 內容模板們（想加幾段就多放幾個 <template>） -->
<template id="tpl-more-1">
  <p>
    琇雯生日快樂！！！ <br>
    很開心能夠在你畢業前跟著學長姐一起幫你慶生<br>
    這是第一次在研究室幫你慶生，也是最後一次，所以顯得格外有意義<br>
    你非常的善良，也很天真，總是帶給我們歡笑<br>
    就連我們準備給你的生日驚喜，你每一步都完美照著我們的計畫走，讓大家忍不住一直偷笑<br>
    希望未來的你走到哪都可以被溫柔對待，繼續天真下去～</p>
</template>

<template id="tpl-more-2">
  <p>
    謝謝琇雯平常對我們的照顧 <br>
    幫我們點餐訂餐收錢，辛苦了！ <br>
    在我們的實驗室都會擔任開心果，跟你開玩笑你都會很開心 <br>
    平常傻傻的樣子欺負起來都很有成就感 (筆者：????) <br>
    氣氛不好的時候也會幫忙調節實驗室的氣氛 <br>
    祝妳生日快樂，未來一切順利，身體健康</p>
</template>

<template id="tpl-more-3">
  <p>
    謝謝最善良的琇雯 <br>
    幫我解決目錄問題 <br>
    還跟我說了很多格式的問題 <br>
    生日快樂～希望你永遠開心 不要有煩惱 🥳🥳</p>
</template>

<!-- 通用對話框（全站共用一個） -->
<dialog id="letter" class="letter">
  <form method="dialog">
    <h3 id="dlgTitle">訊息</h3>
    <div id="dlgBody" class="dlg-body"></div>
    <menu><button class="btn primary">關閉</button></menu>
  </form>
</dialog>

<!-- 這裡是預先寫好的內容：按鈕只要指向對應 id -->
<template id="tpl-p1">
  <p>那是去工工成發當工(蹭)作(吃)人(蹭)員(喝)的一天</p>
  <ul>
    <li>所以說小妹啊，為甚麼要在這時候測量鼻孔大小呢？</li>
  </ul>
</template>

<template id="tpl-p2">
  <p>這是一個只有鍵盤受傷的日子</p>
  <p>甚麼妳說這張這麼模糊為甚麼還要放？ <br>
     來自A姓照片供應商：這張有點糊 但品瑄笑很爽 <br>
     ：她也笑太爽 快仰過去了 <br>
     來自A姓照片供應商：感覺隨時會躺下去
  </p>
</template>

<template id="tpl-p3">
  <p>好的這天筆者人不在現場，只好看圖說故事了</p>
  <p>恩，我看到品瑄在幫妳圍圍巾 <br>
     那圍巾不會痛嗎？</p>
  <p>這裡有太多不太懂的地方，還是打到這裡就好了</p>
</template>

  
<script src="script.js"></script>
  <!-- 這頁專用的小腳本（不動你的 script.js） -->
  <script>
    // 待辦清單：把勾選狀態存到 localStorage
    (function(){
      const key = "bucket-v1";
      const wrap = document.getElementById("bucketList");
      if(!wrap) return;
      const saved = JSON.parse(localStorage.getItem(key) || "{}");
      wrap.querySelectorAll('input[type="checkbox"]').forEach(box=>{
        const id = box.dataset.id;
        if (saved[id]) box.checked = true;
        box.addEventListener("change", ()=>{
          saved[id] = box.checked;
          localStorage.setItem(key, JSON.stringify(saved));
        });
      });
    })();
  </script>
</body>
</html>
<script>
(function(){
  const KEY = "photo-note-";
  const dlg = document.getElementById("noteDialog");
  const titleEl = document.getElementById("noteTitle");
  const ta = document.getElementById("noteTextarea");
  const saveBtn = document.getElementById("noteSave");
  let currentId = null;

  // 讀寫本機
  const load = id => localStorage.getItem(KEY+id) || "";
  const save = (id, text) => localStorage.setItem(KEY+id, text||"");

  // 初始化把本機敘述顯示到每張卡片
  document.querySelectorAll(".polaroids [data-id]").forEach(item=>{
    const id = item.dataset.id;
    const el = document.getElementById("note-"+id);
    if (el) el.textContent = load(id) || "（還沒有敘述）";
  });

  // 點「寫敘述」開啟對話框
  document.addEventListener("click", (e)=>{
    const btn = e.target.closest(".note-btn");
    if (!btn) return;
    currentId = btn.dataset.id;
    const title = btn.closest("figure")?.querySelector(".title")?.textContent || "寫敘述";
    titleEl.textContent = `寫敘述 - ${title}`;
    ta.value = load(currentId);
    dlg.showModal();
  });

  // 存檔
  saveBtn.addEventListener("click", ()=>{
    if (!currentId) return;
    const text = ta.value.trim();
    save(currentId, text);
    const target = document.getElementById("note-"+currentId);
    if (target) target.textContent = text || "（還沒有敘述）";
    dlg.close();
  });
})();
</script>

<script>
  // 點任何含 data-letter 的按鈕 → 開啟通用對話框，載入對應模板
  (function(){
    const dlg   = document.getElementById("letter");
    const title = document.getElementById("dlgTitle");
    const body  = document.getElementById("dlgBody");
    if(!dlg || !title || !body) return;

    document.addEventListener("click", (e)=>{
      const btn = e.target.closest("[data-letter]");
      if(!btn) return;
      const tpl = document.getElementById(btn.dataset.letter);
      if(!tpl) return alert("找不到內容模板：" + btn.dataset.letter);
      title.textContent = btn.dataset.title || "訊息";
      body.innerHTML = tpl.innerHTML;
      dlg.showModal();
    });
  })();
</script>

<script>
  // 點任一含 data-letter 的按鈕 → 開通用對話框，載入對應模板
  (function(){
    const dlg   = document.getElementById("letter");
    const title = document.getElementById("dlgTitle");
    const body  = document.getElementById("dlgBody");
    if(!dlg || !title || !body) return;

    document.addEventListener("click", (e)=>{
      const btn = e.target.closest("[data-letter]");
      if(!btn) return;
      const tpl = document.getElementById(btn.dataset.letter);
      if(!tpl) return alert("找不到內容模板：" + btn.dataset.letter);
      title.textContent = btn.dataset.title || "訊息";
      body.innerHTML = tpl.innerHTML;
      dlg.showModal();
    });
  })();
</script>
